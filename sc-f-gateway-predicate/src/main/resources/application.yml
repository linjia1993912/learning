
server:
  port: 8081
spring:
  profiles:
    active: header_route

#\u8BF7\u6C42\u548C\u8DEF\u7531\u5339\u914D\uFF0C\u51B3\u5B9A\u4E86\u4E00\u4E2A\u8BF7\u6C42\u8D70\u54EA\u4E2A\u8DEF\u7531

#\u4E0B\u9762\u662F\u5404\u79CDPredicate\u914D\u7F6E\u8BE6\u89E3


#After Route Predicate Factory
---
spring:
  cloud:
    gateway:
      routes:
      - id: after_route
        uri: http://httpbin.org:80/get
        predicates:
        - After=2017-01-20T17:42:47.789-07:00[America/Denver]
  profiles: after_route

#\u5728\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u914D\u7F6E\u4E86\u670D\u52A1\u7684\u7AEF\u53E3\u4E3A8081\uFF0C\u914D\u7F6Espring.profiles.active:after_route\u6307\u5B9A\u4E86\u7A0B\u5E8F\u7684spring\u7684\u542F\u52A8\u6587\u4EF6\u4E3Aafter_route\u6587\u4EF6\u3002
#\u5728application.yml\u518D\u5EFA\u4E00\u4E2A\u914D\u7F6E\u6587\u4EF6\uFF0C\u8BED\u6CD5\u662F\u4E09\u4E2A\u6A2A\u7EBF\uFF0C\u5728\u6B64\u914D\u7F6E\u6587\u4EF6\u4E2D\u901A\u8FC7spring.profiles\u6765\u914D\u7F6E\u6587\u4EF6\u540D\uFF0C
#\u548Cspring.profiles.active\u4E00\u81F4\uFF0C\u7136\u540E\u914D\u7F6Espring cloud gateway \u76F8\u5173\u7684\u914D\u7F6E\uFF0Cid\u6807\u7B7E\u914D\u7F6E\u7684\u662Frouter\u7684id\uFF0C
#\u6BCF\u4E2Arouter\u90FD\u9700\u8981\u4E00\u4E2A\u552F\u4E00\u7684id\uFF0Curi\u914D\u7F6E\u7684\u662F\u5C06\u8BF7\u6C42\u8DEF\u7531\u5230\u54EA\u91CC\uFF0C\u672C\u6848\u4F8B\u5168\u90E8\u8DEF\u7531\u5230http://httpbin.org:80/get\u3002

#predicates\uFF1A After=2017-01-20T17:42:47.789-07:00[America/Denver]
#\u4F1A\u88AB\u89E3\u6790\u6210PredicateDefinition\u5BF9\u8C61 \uFF08name =After \uFF0Cargs= 2017-01-20T17:42:47.789-07:00[America/Denver]\uFF09\u3002
#\u5728\u8FD9\u91CC\u9700\u8981\u6CE8\u610F\u7684\u662Fpredicates\u7684After\u8FD9\u4E2A\u914D\u7F6E\uFF0C\u9075\u5FAA\u7684\u5951\u7EA6\u5927\u4E8E\u914D\u7F6E\u7684\u601D\u60F3\uFF0C\u5B83\u5B9E\u9645\u88ABAfterRoutePredicateFactory\u8FD9\u4E2A\u7C7B\u6240\u5904\u7406\uFF0C
#\u8FD9\u4E2AAfter\u5C31\u662F\u6307\u5B9A\u4E86\u5B83\u7684Gateway web handler\u7C7B\u4E3AAfterRoutePredicateFactory\uFF0C\u540C\u7406\uFF0C\u5176\u4ED6\u7C7B\u578B\u7684predicate\u4E5F\u9075\u5FAA\u8FD9\u4E2A\u89C4\u5219

#Header Route Predicate Factory
#Header Route Predicate Factory\u9700\u89812\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u662Fheader\u540D\uFF0C\u53E6\u5916\u4E00\u4E2Aheader\u503C\uFF0C\u8BE5\u503C\u53EF\u4EE5\u662F\u4E00\u4E2A\u6B63\u5219\u8868\u8FBE\u5F0F\u3002
#\u5F53\u6B64\u65AD\u8A00\u5339\u914D\u4E86\u8BF7\u6C42\u7684header\u540D\u548C\u503C\u65F6\uFF0C\u65AD\u8A00\u901A\u8FC7\uFF0C\u8FDB\u5165\u5230router\u7684\u89C4\u5219\u4E2D\u53BB\u3002
---
spring:
  cloud:
    gateway:
      routes:
      - id: header_route
        uri: http://httpbin.org:80/get
        predicates:
        - Header=X-Request-Id, \d+
  profiles: header_route
#\u5728\u4E0A\u9762\u7684\u914D\u7F6E\u4E2D\uFF0C\u5F53\u8BF7\u6C42\u7684Header\u4E2D\u6709X-Request-Id\u7684header\u540D\uFF0C\u4E14header\u503C\u4E3A\u6570\u5B57\u65F6\uFF0C\u8BF7\u6C42\u4F1A\u88AB\u8DEF\u7531\u5230\u914D\u7F6E\u7684 uri.

#Cookie Route Predicate Factory

#Cookie Route Predicate Factory\u9700\u89812\u4E2A\u53C2\u6570\uFF0C\u4E00\u4E2A\u65F6cookie\u540D\u5B57\uFF0C\u53E6\u4E00\u4E2A\u65F6\u503C\uFF0C\u53EF\u4EE5\u4E3A\u6B63\u5219\u8868\u8FBE\u5F0F\u3002
#\u5B83\u7528\u4E8E\u5339\u914D\u8BF7\u6C42\u4E2D\uFF0C\u5E26\u6709\u8BE5\u540D\u79F0\u7684cookie\u548Ccookie\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u8BF7\u6C42\u3002
---
spring:
  cloud:
    gateway:
      routes:
      - id: cookie_route
        uri: http://httpbin.org:80/get
        predicates:
        - Cookie=name, forezp
  profiles: cookie_route
#\u5728\u4E0A\u9762\u7684\u914D\u7F6E\u4E2D\uFF0C\u8BF7\u6C42\u5E26\u6709cookie\u540D\u4E3A name, cookie\u503C\u4E3Aforezp \u7684\u8BF7\u6C42\u5C06\u90FD\u4F1A\u8F6C\u53D1\u5230uri\u4E3A http://httpbin.org:80/get\u7684\u5730\u5740\u4E0A\u3002
#\u4F7F\u7528curl\u547D\u4EE4\u8FDB\u884C\u8BF7\u6C42\uFF0C\u5728\u8BF7\u6C42\u4E2D\u5E26\u4E0A cookie\uFF0C\u4F1A\u8FD4\u56DE\u6B63\u786E\u7684\u7ED3\u679C\uFF0C\u5426\u5219\uFF0C\u8BF7\u6C42\u62A5404\u9519\u8BEF\u3002

#Host Route Predicate Factory
#Host Route Predicate Factory\u9700\u8981\u4E00\u4E2A\u53C2\u6570\u5373hostname\uFF0C\u5B83\u53EF\u4EE5\u4F7F\u7528. * \u7B49\u53BB\u5339\u914Dhost\u3002\u8FD9\u4E2A\u53C2\u6570\u4F1A\u5339\u914D\u8BF7\u6C42\u5934\u4E2D\u7684host\u7684\u503C\uFF0C
#\u4E00\u81F4\uFF0C\u5219\u8BF7\u6C42\u6B63\u786E\u8F6C\u53D1\u3002
---
spring:
  cloud:
    gateway:
      routes:
      - id: host_route
        uri: http://httpbin.org:80/get
        predicates:
        - Host=**.fangzhipeng.com
  profiles: host_route
#\u5728\u4E0A\u9762\u7684\u914D\u7F6E\u4E2D\uFF0C\u8BF7\u6C42\u5934\u4E2D\u542B\u6709Host\u4E3Afangzhipeng.com\u7684\u8BF7\u6C42\u5C06\u4F1A\u88AB\u8DEF\u7531\u8F6C\u53D1\u8F6C\u53D1\u5230\u914D\u7F6E\u7684uri\u3002
#\u542F\u52A8\u5DE5\u7A0B\uFF0C\u6267\u884C\u4EE5\u4E0B\u7684curl\u547D\u4EE4\uFF0C\u8BF7\u6C42\u4F1A\u8FD4\u56DE\u6B63\u786E\u7684\u8BF7\u6C42\u7ED3\u679C\uFF1A

#Method Route Predicate Factory
#Method Route Predicate Factory \u9700\u8981\u4E00\u4E2A\u53C2\u6570\uFF0C\u5373\u8BF7\u6C42\u7684\u7C7B\u578B\u3002\u6BD4\u5982GET\u7C7B\u578B\u7684\u8BF7\u6C42\u90FD\u8F6C\u53D1\u5230\u6B64\u8DEF\u7531\u3002\u5728\u5DE5\u7A0B\u7684\u914D\u7F6E\u6587\u4EF6\u52A0\u4E0A\u4EE5\u4E0B\u7684\u914D\u7F6E\uFF1A
---
spring:
  cloud:
    gateway:
      routes:
      - id: method_route
        uri: http://httpbin.org:80/get
        predicates:
        - Method=GET
  profiles: method_route
#\u5728\u4E0A\u9762\u7684\u914D\u7F6E\u4E2D\uFF0C\u6240\u6709\u7684GET\u7C7B\u578B\u7684\u8BF7\u6C42\u90FD\u4F1A\u8DEF\u7531\u8F6C\u53D1\u5230\u914D\u7F6E\u7684uri\u3002\u4F7F\u7528 curl\u547D\u4EE4\u6A21\u62DF get\u7C7B\u578B\u7684\u8BF7\u6C42\uFF0C\u4F1A\u5F97\u5230\u6B63\u786E\u7684\u8FD4\u56DE\u7ED3\u679C\u3002

#Path Route Predicate Factory
#Path Route Predicate Factory \u9700\u8981\u4E00\u4E2A\u53C2\u6570: \u4E00\u4E2Aspel\u8868\u8FBE\u5F0F\uFF0C\u5E94\u7528\u5339\u914D\u8DEF\u5F84\u3002
---
spring:
  cloud:
    gateway:
      routes:
      - id: path_route
        uri: http://httpbin.org:80/get
        predicates:
        - Path=/foo/{segment}
  profiles: path_route
#\u5728\u4E0A\u9762\u7684\u914D\u7F6E\u4E2D\uFF0C\u6240\u6709\u7684\u8BF7\u6C42\u8DEF\u5F84\u6EE1\u8DB3/foo/{segment}\u7684\u8BF7\u6C42\u5C06\u4F1A\u5339\u914D\u5E76\u88AB\u8DEF\u7531\uFF0C\u6BD4\u5982/foo/1 \u3001/foo/bar\u7684\u8BF7\u6C42\uFF0C\u5C06\u4F1A\u547D\u4E2D\u5339\u914D\uFF0C\u5E76\u6210\u529F\u8F6C\u53D1\u3002

#Query Route Predicate Factory
#Query Route Predicate Factory \u9700\u89812\u4E2A\u53C2\u6570:\u4E00\u4E2A\u53C2\u6570\u540D\u548C\u4E00\u4E2A\u53C2\u6570\u503C\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u3002\u5728\u5DE5\u7A0B\u7684\u914D\u7F6E\u6587\u4EF6application.yml\u505A\u4EE5\u4E0B\u7684\u914D\u7F6E\uFF1A
 ---
 spring:
   cloud:
     gateway:
       routes:
       - id: query_route
         uri: http://httpbin.org:80/get
         predicates:
         - Query=foo, ba.
   profiles: query_route
#\u5728\u4E0A\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u914D\u7F6E\u4E86\u8BF7\u6C42\u4E2D\u542B\u6709\u53C2\u6570foo\uFF0C\u5E76\u4E14foo\u7684\u503C\u5339\u914Dba.\uFF0C\u5219\u8BF7\u6C42\u547D\u4E2D\u8DEF\u7531\uFF0C\u6BD4\u5982\u4E00\u4E2A\u8BF7\u6C42\u4E2D\u542B\u6709\u53C2\u6570\u540D\u4E3Afoo\uFF0C\u503C\u7684\u4E3Abar\uFF0C\u80FD\u591F\u88AB\u6B63\u786E\u8DEF\u7531\u8F6C\u53D1\u3002
#Query Route Predicate Factory\u4E5F\u53EF\u4EE5\u53EA\u586B\u4E00\u4E2A\u53C2\u6570\uFF0C\u586B\u4E00\u4E2A\u53C2\u6570\u65F6\uFF0C\u5219\u53EA\u5339\u914D\u53C2\u6570\u540D\uFF0C\u5373\u8BF7\u6C42\u7684\u53C2\u6570\u4E2D\u542B\u6709\u914D\u7F6E\u7684\u53C2\u6570\u540D\uFF0C\u5219\u547D\u4E2D\u8DEF\u7531\u3002

#\u6BD4\u5982\u4EE5\u4E0B\u7684\u914D\u7F6E\u4E2D\uFF0C\u914D\u7F6E\u4E86\u8BF7\u6C42\u53C2\u6570\u4E2D\u542B\u6709\u53C2\u6570\u540D\u4E3Afoo \u7684\u53C2\u6570\u5C06\u4F1A\u88AB\u8BF7\u6C42\u8F6C\u53D1\u5230uri\u4E3Ahttp://httpbin.org:80/get\u3002
---
spring:
  cloud:
    gateway:
      routes:
      - id: query_route
        uri: http://httpbin.org:80/get
        predicates:
        - Query=foo
  profiles: query_route

